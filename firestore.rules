
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Rule for admins collection
    // Allows server-side actions to read admin emails for login.
    // Client-side writes are disallowed. Admins should be managed via Firebase Console.
    match /admins/{adminId} {
      allow read: if true;
      allow write: if false;
    }

    // Rules for public content that is read by everyone
    // but only written via server actions.
    match /projects/{projectId} {
      allow read: if true;
      allow write: if true; // Allow server-side writes
    }

    match /blogPosts/{postId} {
      allow read: if true;
      allow write: if true; // Allow server-side writes
    }

    match /skills/{skillId} {
      allow read: if true;
      allow write: if true; // Allow server-side writes
    }

    // Rule for 'About Me' content if stored in Firestore
    match /siteContent/aboutMeDetails {
      allow read: if true;
      allow write: if true; // Allow server-side writes
    }

    // Rules for contact messages
    // Disallow client-side reads.
    // Allow server to write new messages.
    match /contactMessages/{messageId} {
      allow read: if false; 
      allow write: if true;  // Allow server to write new messages
    }

    // Default deny for any other paths not explicitly matched
    match /{document=**} {
      allow read, write: if false;
    }
  } // Closes: match /databases/{database}/documents
} // Closes: service cloud.firestore
